<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello, WebVR! • A-Frame</title>
        <meta name="description" content="Hello, WebVR! • A-Frame">
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="./js/libs/aframe-template-component.min.js"></script>
        <script src="./js/libs/aframe-look-at-component-0.8.0.min.js"></script>
        <script src="./js/libs/aframe-animation-timeline-component.min.js"></script>
        <script src="./js-dist/bundle.js"></script>

        <link rel="stylesheet" href="./assets/css/bundle.css">

        <!-- data -->

    </head>
    <body>
        <a-scene debug background="color: #191a1c" vr-mode-ui="enabled: false">
            <a-assets>
                <!-- PCD -->
                <a-asset-item id="house-pcd" src="./assets/models/main_object(house1).pcd" response-type="arraybuffer"></a-asset-item>
                <a-asset-item id="graffiti-pcd" src="./assets/models/graffiti1_55k_verts.pcd" response-type="arraybuffer"></a-asset-item>
                <a-asset-item id="car-pcd" src="./assets/models/thecar_80k_verts.pcd" response-type="arraybuffer"></a-asset-item>

                <!-- SOUND -->
                <audio id="click-mp3" src="./assets/sound/click.mp3" preload="auto"></audio>
                <audio id="doctor-mp3" src="./assets/sound/doctor.mp3" preload="auto"></audio>
            </a-assets>


            <a-timeline id="abox_timeline_data">
                <a-timeline-animation select="#abox" name="position1"></a-timeline-animation>
                <a-timeline-animation select="#abox" name="position2"></a-timeline-animation>
                <a-timeline-animation select="#abox" name="position3"></a-timeline-animation>
            </a-timeline>

            <a-entity id="abox"
                      geometry="primitive: box; width: 5; height: 5; depth: 5"
                      position="0 0 0"
                      animation-timeline="timeline: #abox_timeline_data; startEvents: key_up"
                      animation-timeline-controller="timelineId: #abox; triggerEmitterId: #keyboard-emitter; triggerNext: key_up; triggerPrev: key_down;"
                      animation__position1="property: position; to: 0 5 0; dur: 1000; autoplay: false"
                      animation__position2="property: position; from: 0 5 0; to: 0 10 0; dur: 1000; autoplay: false"
                      animation__position3="property: position; from: 0 10 0; to: 0 15 0; dur: 1000; autoplay: false">
            </a-entity>


            <!-- interaction -->
            <a-entity id="keyboard-emitter" keyboard-event-emitter></a-entity>

            <!-- sound -->
            <a-sound id="audio-player" src="null" positional="false"></a-sound>

            <!-- scene objects -->
            <!-- always set scene objects parameters in the template file -->
            <a-entity id="main" template="src: ./assets/scenes/scene1/main-object.template" position="0 0 0"></a-entity>

            <a-entity id="template-switcher"
                      template="src: ./assets/scenes/scene1/objects/man.template"
                      template-switcher="
                          parseAudio: true;
                          fromJson: ./assets/data/timeline.json;
                      position="0 0 0"></a-entity>

            <!-- main camera -->i
            <a-entity id="rig" geometry="primitive: box" look-at="#floor" position="-9 12 15">
                <a-entity id="overview-camera" camera="zoom: 2;" rotation="0 180 0"></a-entity>
            </a-entity>

            <a-plane id="floor" position="0 0 0" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
        </a-scene>

    </body>
</html>
